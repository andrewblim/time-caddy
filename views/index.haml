!!! 5
%html
  %head
    %title time-caddy
    %meta{charset: 'utf-8'}
    %meta{name: 'viewport', content: 'width=device-width, initial-scale=1'}
    %link{rel: 'stylesheet', href: 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css', integrity: 'sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u', crossorigin: 'anonymous'}
  %body
    %nav.navbar.navbar-default
      .container-fluid
        .navbar-header
          %button.navbar-toggle.collapsed{type: 'button', data_toggle: 'collapse', data_target: '#navbar', aria_expanded: 'false'}
            %span.sr-only Toggle navigation
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          %a.navbar-brand{href: '#'} time-caddy
        #navbar.collapse.navbar-collapse
          %ul.nav.navbar-nav
            - if logged_in_user
              %li
                %a{href: '/entries'} Entries
              %li
                %a{href: '/tags'} Tags
            %li
              %a{href: '/about'} About
          - if logged_in_user
            %ul.nav.navbar-nav.navbar-right
              %form.navbar-form.navbar-right{action: '/logout', method: 'post'}
                .form-group
                  %input.form-control{type: 'submit', value: 'Logout'}
            %ul.nav.navbar-nav.navbar-right
              %li
                %a{href: '/profile'} Profile
              %li
                %a{href: '/settings'} Settings
            %p.navbar-text.navbar-right= "Hello, #{logged_in_user.username}"
          - else
            %ul.nav.navbar-nav.navbar-right
              %li
                %a{href: '/signup'} Sign up
            %form.navbar-form.navbar-right{action: '/login', method: 'post'}
              .form-group
                %input.form-control{type: 'text', name: 'username', placeholder: 'Username'}
                %input.form-control{type: 'password', name: 'password', placeholder: 'Password'}
                %input.form-control{type: 'submit', value: 'Login'}
            %p.navbar-text.navbar-right You are not currently signed in

    .container-fluid
      - if flash[:login]
        %p= flash[:login]
      - if logged_in_user
        %p= "Hello, #{logged_in_user.username}."
        %p
          Add an entry:
          %textarea
        %p
          Current entries:
          %table
            %th
              %td ID
              %td Start at
              %td Finish at
              %td Description
              %td Tags
            %tr
              %td
                - logged_in_user.log_entries.each do |log_entry|
                  %td= "#{log_entry.id}"
                  %td= "#{log_entry.start_at}"
                  %td= "#{log_entry.finish_at}"
                  %td= "#{log_entry.description}"
                  %td= "#{log_entry.tags.map(&:name)}"
      - else
        %p
          Hello, anonymous.
          %a{href: "/login"} Log in
          if you already have an account.
          %a{href: "/signup"} Sign up
          if you don't.
